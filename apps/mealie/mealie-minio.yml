apiVersion: minio.min.io/v2
kind: Tenant
metadata:
  name: mealie-minio
spec:
  exposeServices:
    console: true
    minio: true
  image: >-
    minio/minio@sha256:d88c394a2e4c3ca2b1fa5ac49451f5d0fea602b79365f0081e993eed733d4ed2
  imagePullSecret: {}
  mountPath: /export
  pools:
    - affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                  - key: v1.min.io/tenant
                    operator: In
                    values:
                      - mealie
                  - key: v1.min.io/pool
                    operator: In
                    values:
                      - pool-0
              topologyKey: kubernetes.io/hostname
      name: pool-0
      resources:
        requests:
          cpu: '3'
          memory: 4Gi
      servers: 1
      volumeClaimTemplate:
        metadata:
          name: data
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: '10737418240'
          storageClassName: local-hostpath-external-hdd
      volumesPerServer: 4
  requestAutoCert: true
  users:
    - name: mealie-user-0
